if(folder == "Network"){
start <- "2014-09-01"%>%as.Date
end <- "2020-12-31"%>%as.Date
}else{
start <- as.Date("2011-11-01")
end <- "2018-12-31"%>%as.Date
}
users <- read.csv(paste0(folder,"/my-wallet-n-users.txt"))
trans <- read.csv(paste0(folder,"/n-transactions.txt"))
addy <- read.csv(paste0(folder,"/n-unique-addresses.txt"))
users$Timestamp <- as.Date(users$Timestamp)
trans$Timestamp <- as.Date(trans$Timestamp)
addy$Timestamp <- as.Date(addy$Timestamp)
users2 <- users %>% group_by(Timestamp)%>%summarise(users = mean(my.wallet.n.users)) %>%subset(Timestamp > start & Timestamp < end) %>%mutate(month = format(Timestamp, "%m%Y"))%>%group_by(month)%>%summarise(users = mean(users))%>%mutate_at(c(2), function(x){x - lag(x)}) %>%mutate(month = as.Date(paste0("01", month), format = "%d%m%Y"))
trans2 <- trans %>% group_by(Timestamp)%>%summarise(trans = mean(n.transactions)) %>%subset(Timestamp > start& Timestamp < end) %>%mutate(month = format(Timestamp, "%m%Y"))%>%group_by(month)%>%summarise(trans = mean(trans)) %>% mutate_at(c(2), function(x){x - lag(x)})%>%mutate(month = as.Date(paste0("01", month), format = "%d%m%Y"))
addy2 <- addy %>% group_by(Timestamp)%>%summarise(addy = mean(n.unique.addresses)) %>%subset(Timestamp > start& Timestamp < end) %>%mutate(month = format(Timestamp, "%m%Y"))%>%group_by(month)%>%summarise(addy = mean(addy))%>% mutate_at(c(2), function(x){x - lag(x)})%>%mutate(month = as.Date(paste0("01", month), format = "%d%m%Y"))
delta_net <- users2%>%merge(trans2, all.x=TRUE, all.y=TRUE)%>%merge(addy2, all.x=TRUE, all.y=TRUE) %>%
arrange(month)
#delta_net <- net %>% mutate_at(c(2:4), function(x){x - lag(x)})
getSymbols("BTC-USD",from = min(users$Timestamp),to =  max(users$Timestamp))
BTC <- as.data.frame(`BTC-USD`)
BTC$Date <- as.Date(rownames(BTC))#seq(min(delta_net$Timestamp),max(delta_net$Timestamp),by="days")
#BTC$`BTC-USD.Close`[BTC$Date=="2020-04-17"] <- 7096.18
BTC <- BTC%>%mutate(month = format(Date, "%m%Y"))%>%group_by(month)%>%summarise(`BTC-USD.Close` = mean(`BTC-USD.Close`))%>%
arrange(month)
BTC_return_dat <- data.frame(Date = BTC$month[-1],
BTC = 100*((BTC[-1,c( "BTC-USD.Close") ])-
(BTC[-nrow(BTC),c("BTC-USD.Close") ]))/BTC[-nrow(BTC),c("BTC-USD.Close") ])%>%
mutate(month = as.Date(paste0("01", Date), format = "%d%m%Y"))
BTC_dat <- data.frame(Date = BTC$month[-1],
BTC = BTC[-1,c( "BTC-USD.Close") ])%>%
arrange(Date)
all <- merge(delta_net, BTC_return_dat, by.x = "month", by.y= "month", all=TRUE) #%>%subset(Timestamp > as.Date("2015-01-01"))
cor(delta_net[,-1])
lm_trans_month <- lm(BTC.USD.Close ~ trans , data = all)
summary(lm_trans_month )
lm_addy_month  <- lm(BTC.USD.Close ~ addy, data = all)
summary(lm_addy_month)
lm_users_month  <- lm(BTC.USD.Close ~ users , data = all)
summary(lm_users_month )
lm5_month_old  <- lm(BTC.USD.Close ~  trans + addy+users , data = all)
summary(lm5_month_old)
return(lm5_month_old)
}
monthly_old <- get_monthly_reg(folder = "Network_older")
monthly_new <- get_monthly_reg(folder = "Network")
get_daily_reg <- function(folder){
if(folder == "Network"){
start <- "2014-09-01"%>%as.Date
end <- "2020-12-31"%>%as.Date
}else{
start <- as.Date("2014-11-01")
end <- "2018-12-31"%>%as.Date
}
users <- read.csv(paste0(folder,"/my-wallet-n-users.txt"))
trans <- read.csv(paste0(folder,"/n-transactions.txt"))
addy <- read.csv(paste0(folder,"/n-unique-addresses.txt"))
#pmts <- read.csv(paste0(folder,"/n-payments.txt"))
users$Timestamp <- as.Date(users$Timestamp)
#pmts$Timestamp <- as.Date(pmts$Timestamp)
trans$Timestamp <- as.Date(trans$Timestamp)
addy$Timestamp <- as.Date(addy$Timestamp)
users <- users %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(users = mean(my.wallet.n.users))
#pmts <- pmts %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(pmts = mean(n.payments))
trans <- trans %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(trans = mean(n.transactions))
addy <- addy %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(addy = mean(n.unique.addresses))
net <- users %>%merge(trans,all=TRUE)%>%merge(addy,all=TRUE)
delta_net <- net %>% mutate_at(c(2:4), function(x){x - lag(x)})
getSymbols("BTC-USD",from = min(delta_net$Timestamp),to =  max(delta_net$Timestamp))
BTC <- as.data.frame(`BTC-USD`)
BTC$Date <- as.Date(rownames(BTC))#seq(min(delta_net$Timestamp),max(delta_net$Timestamp),by="days")
BTC$`BTC-USD.Close`[BTC$Date=="2020-04-17"] <- 7096.18
BTC_return_dat <-  data.frame(Date = BTC$Date[-1],
BTC = 100*(log(BTC[-1,c( "BTC-USD.Close") ])-
log(BTC[-nrow(BTC),c("BTC-USD.Close") ])))
BTC_dat <- data.frame(Date = BTC$Date[-1],
BTC = BTC[-1,c( "BTC-USD.Close") ])
all <- merge(delta_net, BTC_return_dat, by.x = "Timestamp", by.y= "Date")
lm_users <- lm(BTC ~ users , data = all)
summary(lm_users)
#lm_pmts <- lm(BTC ~ pmts, data = all)
#summary(lm_pmts)
lm_trans <- lm(BTC ~ trans , data = all)
summary(lm_trans)
lm_addy <- lm(BTC ~ addy, data = all)
summary(lm_addy)
lm5 <- lm(BTC ~  trans + addy + users, data = all)
return(lm5)
}
daily_old <- get_daily_reg("Network_old")
daily_old <- get_daily_reg(folder = "Network_old")
daily_new <- get_daily_reg(folder = "Network")
daily_old <- get_daily_reg(folder = "Network_old")
daily_old <- get_daily_reg(folder = "Network_older")
get_daily_reg <- function(folder){
if(folder == "Network"){
start <- "2014-09-01"%>%as.Date
end <- "2020-12-31"%>%as.Date
}else{
start <- as.Date("2014-11-01")
end <- "2018-12-31"%>%as.Date
}
users <- read.csv(paste0(folder,"/my-wallet-n-users.txt"))
trans <- read.csv(paste0(folder,"/n-transactions.txt"))
addy <- read.csv(paste0(folder,"/n-unique-addresses.txt"))
#pmts <- read.csv(paste0(folder,"/n-payments.txt"))
users$Timestamp <- as.Date(users$Timestamp)
#pmts$Timestamp <- as.Date(pmts$Timestamp)
trans$Timestamp <- as.Date(trans$Timestamp)
addy$Timestamp <- as.Date(addy$Timestamp)
users <- users %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(users = mean(my.wallet.n.users))
#pmts <- pmts %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(pmts = mean(n.payments))
trans <- trans %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(trans = mean(n.transactions))
addy <- addy %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(addy = mean(n.unique.addresses))
net <- users %>%merge(trans,all=TRUE)%>%merge(addy,all=TRUE)
delta_net <- net %>% mutate_at(c(2:4), function(x){x - lag(x)})
getSymbols("BTC-USD",from = min(delta_net$Timestamp),to =  max(delta_net$Timestamp))
BTC <- as.data.frame(`BTC-USD`)
BTC$Date <- as.Date(rownames(BTC))#seq(min(delta_net$Timestamp),max(delta_net$Timestamp),by="days")
BTC$`BTC-USD.Close`[BTC$Date=="2020-04-17"] <- 7096.18
BTC_return_dat <-  data.frame(Date = BTC$Date[-1],
BTC = 100*(log(BTC[-1,c( "BTC-USD.Close") ])-
log(BTC[-nrow(BTC),c("BTC-USD.Close") ])))
BTC_dat <- data.frame(Date = BTC$Date[-1],
BTC = BTC[-1,c( "BTC-USD.Close") ])
all <- merge(delta_net, BTC_return_dat, by.x = "Timestamp", by.y= "Date")
lm_users <- lm(BTC ~ users , data = all)
summary(lm_users)
#lm_pmts <- lm(BTC ~ pmts, data = all)
#summary(lm_pmts)
#lm_trans <- lm(BTC ~ trans , data = all)
#summary(lm_trans)
lm_addy <- lm(BTC ~ addy, data = all)
summary(lm_addy)
lm5 <- lm(BTC ~  trans + addy + users, data = all)
return(lm5)
}
daily_old <- get_daily_reg(folder = "Network_older")
daily_new <- get_daily_reg(folder = "Network")
folder = "Network_older"
if(folder == "Network"){
start <- "2014-09-01"%>%as.Date
end <- "2020-12-31"%>%as.Date
}else{
start <- as.Date("2014-11-01")
end <- "2018-12-31"%>%as.Date
}
users <- read.csv(paste0(folder,"/my-wallet-n-users.txt"))
trans <- read.csv(paste0(folder,"/n-transactions.txt"))
addy <- read.csv(paste0(folder,"/n-unique-addresses.txt"))
users$Timestamp <- as.Date(users$Timestamp)
#pmts$Timestamp <- as.Date(pmts$Timestamp)
trans$Timestamp <- as.Date(trans$Timestamp)
addy$Timestamp <- as.Date(addy$Timestamp)
users <- users %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(users = mean(my.wallet.n.users))
#pmts <- pmts %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(pmts = mean(n.payments))
trans <- trans %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(trans = mean(n.transactions))
addy <- addy %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(addy = mean(n.unique.addresses))
net <- users %>%merge(trans,all=TRUE)%>%merge(addy,all=TRUE)
net
View(net)
daily_new <- get_daily_reg(folder = "Network")
daily_new
if(folder == "Network"){
start <- "2014-09-01"%>%as.Date
end <- "2020-12-31"%>%as.Date
}else{
start <- as.Date("2011-11-01")
end <- "2018-12-31"%>%as.Date
}
folder
users <- read.csv(paste0(folder,"/my-wallet-n-users.txt"))
trans <- read.csv(paste0(folder,"/n-transactions.txt"))
addy <- read.csv(paste0(folder,"/n-unique-addresses.txt"))
users$Timestamp <- as.Date(users$Timestamp)
trans$Timestamp <- as.Date(trans$Timestamp)
addy$Timestamp <- as.Date(addy$Timestamp)
users2 <- users %>% group_by(Timestamp)%>%summarise(users = mean(my.wallet.n.users)) %>%subset(Timestamp > start & Timestamp < end) %>%mutate(month = format(Timestamp, "%m%Y"))%>%group_by(month)%>%summarise(users = mean(users))%>%mutate_at(c(2), function(x){x - lag(x)}) %>%mutate(month = as.Date(paste0("01", month), format = "%d%m%Y"))
trans2 <- trans %>% group_by(Timestamp)%>%summarise(trans = mean(n.transactions)) %>%subset(Timestamp > start& Timestamp < end) %>%mutate(month = format(Timestamp, "%m%Y"))%>%group_by(month)%>%summarise(trans = mean(trans)) %>% mutate_at(c(2), function(x){x - lag(x)})%>%mutate(month = as.Date(paste0("01", month), format = "%d%m%Y"))
addy2 <- addy %>% group_by(Timestamp)%>%summarise(addy = mean(n.unique.addresses)) %>%subset(Timestamp > start& Timestamp < end) %>%mutate(month = format(Timestamp, "%m%Y"))%>%group_by(month)%>%summarise(addy = mean(addy))%>% mutate_at(c(2), function(x){x - lag(x)})%>%mutate(month = as.Date(paste0("01", month), format = "%d%m%Y"))
delta_net <- users2%>%merge(trans2, all.x=TRUE, all.y=TRUE)%>%merge(addy2, all.x=TRUE, all.y=TRUE) %>%
arrange(month)
delta_net
users2
users
devtools::install_github("amrrs/coinmarketcapr")
library(coinmarketcapr)
?get_crypto_listings
get_crypto_listings
get_crypto_listings()
get_crypto_listings('EUR')
get_crypto_listings
.get_api_key
?get_api_key
?.get_api_key
get_crypto_listings
get_crypto_listings()
get_api_info
get_api_info()
users <- read.csv(paste0(folder,"/my-wallet-n-users.txt"))
trans <- read.csv(paste0(folder,"/n-transactions.txt"))
addy <- read.csv(paste0(folder,"/n-unique-addresses.txt"))
users$Timestamp <- as.Date(users$Timestamp)
trans$Timestamp <- as.Date(trans$Timestamp)
addy$Timestamp <- as.Date(addy$Timestamp)
users2 <- users %>% group_by(Timestamp)%>%summarise(users = mean(my.wallet.n.users)) %>%subset(Timestamp > start & Timestamp < end) %>%mutate(month = format(Timestamp, "%m%Y"))%>%group_by(month)%>%summarise(users = mean(users))%>%mutate_at(c(2), function(x){x - lag(x)}) %>%mutate(month = as.Date(paste0("01", month), format = "%d%m%Y"))
trans2 <- trans %>% group_by(Timestamp)%>%summarise(trans = mean(n.transactions)) %>%subset(Timestamp > start& Timestamp < end) %>%mutate(month = format(Timestamp, "%m%Y"))%>%group_by(month)%>%summarise(trans = mean(trans)) %>% mutate_at(c(2), function(x){x - lag(x)})%>%mutate(month = as.Date(paste0("01", month), format = "%d%m%Y"))
addy2 <- addy %>% group_by(Timestamp)%>%summarise(addy = mean(n.unique.addresses)) %>%subset(Timestamp > start& Timestamp < end) %>%mutate(month = format(Timestamp, "%m%Y"))%>%group_by(month)%>%summarise(addy = mean(addy))%>% mutate_at(c(2), function(x){x - lag(x)})%>%mutate(month = as.Date(paste0("01", month), format = "%d%m%Y"))
delta_net <- users2%>%merge(trans2, all.x=TRUE, all.y=TRUE)%>%merge(addy2, all.x=TRUE, all.y=TRUE) %>%
arrange(month)
View(delta_net)
if(folder == "Network"){
start <- "2014-09-01"%>%as.Date
end <- "2020-12-31"%>%as.Date
}else{
start <- as.Date("2014-11-01")
end <- "2018-12-31"%>%as.Date
}
users <- read.csv(paste0(folder,"/my-wallet-n-users.txt"))
trans <- read.csv(paste0(folder,"/n-transactions.txt"))
addy <- read.csv(paste0(folder,"/n-unique-addresses.txt"))
users$Timestamp <- as.Date(users$Timestamp)
#pmts$Timestamp <- as.Date(pmts$Timestamp)
trans$Timestamp <- as.Date(trans$Timestamp)
addy$Timestamp <- as.Date(addy$Timestamp)
users <- users %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(users = mean(my.wallet.n.users))
#pmts <- pmts %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(pmts = mean(n.payments))
trans <- trans %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(trans = mean(n.transactions))
addy <- addy %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(addy = mean(n.unique.addresses))
net <- users %>%merge(trans,all=TRUE)%>%merge(addy,all=TRUE)
delta_net <- net %>% mutate_at(c(2:4), function(x){x - lag(x)})
delta_net
if(folder == "Network"){
start <- "2014-09-01"%>%as.Date
end <- "2020-12-31"%>%as.Date
}else{
start <- as.Date("2014-11-01")
end <- "2018-12-31"%>%as.Date
}
users <- read.csv(paste0(folder,"/my-wallet-n-users.txt"))
trans <- read.csv(paste0(folder,"/n-transactions.txt"))
addy <- read.csv(paste0(folder,"/n-unique-addresses.txt"))
users$Timestamp <- as.Date(users$Timestamp)
#pmts$Timestamp <- as.Date(pmts$Timestamp)
trans$Timestamp <- as.Date(trans$Timestamp)
addy$Timestamp <- as.Date(addy$Timestamp)
users <- users %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(users = mean(my.wallet.n.users))
#pmts <- pmts %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(pmts = mean(n.payments))
trans <- trans %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(trans = mean(n.transactions))
addy <- addy %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(addy = mean(n.unique.addresses))
net <- users %>%merge(trans,all=TRUE)%>%merge(addy,all=TRUE)
delta_net <- net %>% mutate_at(c(2:4), function(x){x - lag(x)})
delta_net
View(delta_net)
users
trans
addy
users$Timestamp <- as.Date(users$Timestamp)
#pmts$Timestamp <- as.Date(pmts$Timestamp)
trans$Timestamp <- as.Date(trans$Timestamp)
addy$Timestamp <- as.Date(addy$Timestamp)
users <- users %>% subset(Timestamp > start & Timestamp < end)%>%group_by(Timestamp)%>%summarise(users = mean(my.wallet.n.users))
#pmts <- pmts %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(pmts = mean(n.payments))
trans <- trans %>% subset(Timestamp > start & Timestamp < end)%>%group_by(Timestamp)%>%summarise(trans = mean(n.transactions))
addy <- addy %>% subset(Timestamp > start & Timestamp < end)%>%group_by(Timestamp)%>%summarise(addy = mean(n.unique.addresses))
users <- read.csv(paste0(folder,"/my-wallet-n-users.txt"))
trans <- read.csv(paste0(folder,"/n-transactions.txt"))
addy <- read.csv(paste0(folder,"/n-unique-addresses.txt"))
users$Timestamp <- as.Date(users$Timestamp)
#pmts$Timestamp <- as.Date(pmts$Timestamp)
trans$Timestamp <- as.Date(trans$Timestamp)
addy$Timestamp <- as.Date(addy$Timestamp)
users <- users %>% subset(Timestamp > start & Timestamp < end)%>%group_by(Timestamp)%>%summarise(users = mean(my.wallet.n.users))
#pmts <- pmts %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(pmts = mean(n.payments))
trans <- trans %>% subset(Timestamp > start & Timestamp < end)%>%group_by(Timestamp)%>%summarise(trans = mean(n.transactions))
addy <- addy %>% subset(Timestamp > start & Timestamp < end)%>%group_by(Timestamp)%>%summarise(addy = mean(n.unique.addresses))
net <- users %>%merge(trans,all=TRUE)%>%merge(addy,all=TRUE)
net
View(net)
folder
folder = "Network"
if(folder == "Network"){
start <- "2014-09-01"%>%as.Date
end <- "2020-12-31"%>%as.Date
}else{
start <- as.Date("2014-11-01")
end <- "2018-12-31"%>%as.Date
}
users <- read.csv(paste0(folder,"/my-wallet-n-users.txt"))
trans <- read.csv(paste0(folder,"/n-transactions.txt"))
addy <- read.csv(paste0(folder,"/n-unique-addresses.txt"))
users$Timestamp <- as.Date(users$Timestamp)
#pmts$Timestamp <- as.Date(pmts$Timestamp)
trans$Timestamp <- as.Date(trans$Timestamp)
addy$Timestamp <- as.Date(addy$Timestamp)
users <- users %>% subset(Timestamp > start & Timestamp < end)%>%group_by(Timestamp)%>%summarise(users = mean(my.wallet.n.users))
#pmts <- pmts %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(pmts = mean(n.payments))
trans <- trans %>% subset(Timestamp > start & Timestamp < end)%>%group_by(Timestamp)%>%summarise(trans = mean(n.transactions))
addy <- addy %>% subset(Timestamp > start & Timestamp < end)%>%group_by(Timestamp)%>%summarise(addy = mean(n.unique.addresses))
net <- users %>%merge(trans,all=TRUE)%>%merge(addy,all=TRUE)
net
######
#DOES MONTHLY AGGREGATIONS
#Liu time period: January 1, 2011, to December 31, 2018
#Our time period: September 2014 to December 2020
rm(list = ls())  ## DON'T FORGET TO SET WD!!
library(ald)
library(ggplot2)
library(dplyr)
library(truncnorm)
library(mvtnorm)
library(tmvtnorm)
library(Rcpp)
library(MCMCpack)
library(quantmod)
library(RcppTN)
library(lubridate)
library(coinmarketcapr)
folder = "Network"
users <- read.csv(paste0(folder,"/my-wallet-n-users.txt"))
trans <- read.csv(paste0(folder,"/n-transactions.txt"))
addy <- read.csv(paste0(folder,"/n-unique-addresses.txt"))
users$Timestamp <- as.Date(users$Timestamp)
trans$Timestamp <- as.Date(trans$Timestamp)
addy$Timestamp <- as.Date(addy$Timestamp)
summary(users)
summary(trans)
summary(addy)
folder = "Network_older"
users <- read.csv(paste0(folder,"/my-wallet-n-users.txt"))
trans <- read.csv(paste0(folder,"/n-transactions.txt"))
addy <- read.csv(paste0(folder,"/n-unique-addresses.txt"))
users$Timestamp <- as.Date(users$Timestamp)
#pmts$Timestamp <- as.Date(pmts$Timestamp)
trans$Timestamp <- as.Date(trans$Timestamp)
addy$Timestamp <- as.Date(addy$Timestamp)
summary(users)
summary(trans)
summary(addy)
dim(users)
dim(trans)
dim(addy)
View(users)
folder = "Network"
users <- read.csv(paste0(folder,"/my-wallet-n-users.txt"))
trans <- read.csv(paste0(folder,"/n-transactions.txt"))
addy <- read.csv(paste0(folder,"/n-unique-addresses.txt"))
users$Timestamp <- as.Date(users$Timestamp)
#pmts$Timestamp <- as.Date(pmts$Timestamp)
trans$Timestamp <- as.Date(trans$Timestamp)
addy$Timestamp <- as.Date(addy$Timestamp)
View(users)
folder = "Network_older"
users <- read.csv(paste0(folder,"/my-wallet-n-users.txt"))
trans <- read.csv(paste0(folder,"/n-transactions.txt"))
addy <- read.csv(paste0(folder,"/n-unique-addresses.txt"))
users$Timestamp <- as.Date(users$Timestamp)
#pmts$Timestamp <- as.Date(pmts$Timestamp)
trans$Timestamp <- as.Date(trans$Timestamp)
addy$Timestamp <- as.Date(addy$Timestamp)
View(users)
View(trans)
View(addy)
users <- users %>% subset(Timestamp > start & Timestamp < end)%>%group_by(Timestamp)%>%summarise(users = mean(my.wallet.n.users))
#pmts <- pmts %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(pmts = mean(n.payments))
trans <- trans %>% subset(Timestamp > start & Timestamp < end)%>%group_by(Timestamp)%>%summarise(trans = mean(n.transactions))
addy <- addy %>% subset(Timestamp > start & Timestamp < end)%>%group_by(Timestamp)%>%summarise(addy = mean(n.unique.addresses))
start <- as.Date("2014-11-01")
end <- "2018-12-31"%>%as.Date
users <- users %>% subset(Timestamp > start & Timestamp < end)%>%group_by(Timestamp)%>%summarise(users = mean(my.wallet.n.users))
#pmts <- pmts %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(pmts = mean(n.payments))
trans <- trans %>% subset(Timestamp > start & Timestamp < end)%>%group_by(Timestamp)%>%summarise(trans = mean(n.transactions))
addy <- addy %>% subset(Timestamp > start & Timestamp < end)%>%group_by(Timestamp)%>%summarise(addy = mean(n.unique.addresses))
net <- users %>%merge(trans,all=TRUE)%>%merge(addy,all=TRUE)
delta_net <- net %>% mutate_at(c(2:4), function(x){x - lag(x)})
getSymbols("BTC-USD",from = min(delta_net$Timestamp),to =  max(delta_net$Timestamp))
BTC <- as.data.frame(`BTC-USD`)
BTC$Date <- as.Date(rownames(BTC))#seq(min(delta_net$Timestamp),max(delta_net$Timestamp),by="days")
BTC$`BTC-USD.Close`[BTC$Date=="2020-04-17"] <- 7096.18
BTC_return_dat <-  data.frame(Date = BTC$Date[-1],
BTC = 100*(log(BTC[-1,c( "BTC-USD.Close") ])-
log(BTC[-nrow(BTC),c("BTC-USD.Close") ])))
BTC_dat <- data.frame(Date = BTC$Date[-1],
BTC = BTC[-1,c( "BTC-USD.Close") ])
delta_net
net
######
#FOR DAILY ANALYSIS
rm(list = ls())
library(ald)
library(ggplot2)
library(dplyr)
library(truncnorm)
library(mvtnorm)
library(tmvtnorm)
library(Rcpp)
library(MCMCpack)
library(quantmod)
library(RcppTN)
library(lubridate)
get_daily_reg <- function(folder){
if(folder == "Network"){
start <- "2014-09-01"%>%as.Date
end <- "2020-12-31"%>%as.Date
}else{
start <- as.Date("2014-11-01")
end <- "2018-12-31"%>%as.Date
}
users <- read.csv(paste0(folder,"/my-wallet-n-users.txt"))
trans <- read.csv(paste0(folder,"/n-transactions.txt"))
addy <- read.csv(paste0(folder,"/n-unique-addresses.txt"))
#pmts <- read.csv(paste0(folder,"/n-payments.txt"))
users$Timestamp <- as.Date(users$Timestamp)
#pmts$Timestamp <- as.Date(pmts$Timestamp)
trans$Timestamp <- as.Date(trans$Timestamp)
addy$Timestamp <- as.Date(addy$Timestamp)
users <- users %>% subset(Timestamp > start & Timestamp < end)%>%group_by(Timestamp)%>%summarise(users = mean(my.wallet.n.users))
#pmts <- pmts %>% group_by(Timestamp)%>%subset(Timestamp > start & Timestamp < end)%>%summarise(pmts = mean(n.payments))
trans <- trans %>% subset(Timestamp > start & Timestamp < end)%>%group_by(Timestamp)%>%summarise(trans = mean(n.transactions))
addy <- addy %>% subset(Timestamp > start & Timestamp < end)%>%group_by(Timestamp)%>%summarise(addy = mean(n.unique.addresses))
net <- users %>%merge(trans,all=TRUE)%>%merge(addy,all=TRUE)
delta_net <- net %>% mutate_at(c(2:4), function(x){x - lag(x)})
getSymbols("BTC-USD",from = min(delta_net$Timestamp),to =  max(delta_net$Timestamp))
BTC <- as.data.frame(`BTC-USD`)
BTC$Date <- as.Date(rownames(BTC))#seq(min(delta_net$Timestamp),max(delta_net$Timestamp),by="days")
BTC$`BTC-USD.Close`[BTC$Date=="2020-04-17"] <- 7096.18
BTC_return_dat <-  data.frame(Date = BTC$Date[-1],
BTC = 100*(log(BTC[-1,c( "BTC-USD.Close") ])-
log(BTC[-nrow(BTC),c("BTC-USD.Close") ])))
BTC_dat <- data.frame(Date = BTC$Date[-1],
BTC = BTC[-1,c( "BTC-USD.Close") ])
all <- merge(delta_net, BTC_return_dat, by.x = "Timestamp", by.y= "Date")
lm_users <- lm(BTC ~ users , data = all)
summary(lm_users)
#lm_pmts <- lm(BTC ~ pmts, data = all)
#summary(lm_pmts)
#lm_trans <- lm(BTC ~ trans , data = all)
#summary(lm_trans)
lm_addy <- lm(BTC ~ addy, data = all)
summary(lm_addy)
lm5 <- lm(BTC ~  trans + addy + users, data = all)
return(lm5)
}
#can't do old; there is not data available on daily level
#daily_old <- get_daily_reg(folder = "Network_older")
daily_new <- get_daily_reg(folder = "Network")
######
#DOES MONTHLY AGGREGATIONS
#Liu time period: January 1, 2011, to December 31, 2018
#Our time period: September 2014 to December 2020
rm(list = ls())  ## DON'T FORGET TO SET WD!!
library(ald)
library(ggplot2)
library(dplyr)
library(truncnorm)
library(mvtnorm)
library(tmvtnorm)
library(Rcpp)
library(MCMCpack)
library(quantmod)
library(RcppTN)
library(lubridate)
library(coinmarketcapr)
get_monthly_reg <- function(folder){
if(folder == "Network"){
start <- "2014-09-01"%>%as.Date
end <- "2020-12-31"%>%as.Date
}else{
start <- as.Date("2011-11-01")
end <- "2018-12-31"%>%as.Date
}
users <- read.csv(paste0(folder,"/my-wallet-n-users.txt"))
trans <- read.csv(paste0(folder,"/n-transactions.txt"))
addy <- read.csv(paste0(folder,"/n-unique-addresses.txt"))
users$Timestamp <- as.Date(users$Timestamp)
trans$Timestamp <- as.Date(trans$Timestamp)
addy$Timestamp <- as.Date(addy$Timestamp)
users2 <- users %>% group_by(Timestamp)%>%summarise(users = mean(my.wallet.n.users)) %>%subset(Timestamp > start & Timestamp < end) %>%mutate(month = format(Timestamp, "%m%Y"))%>%group_by(month)%>%summarise(users = mean(users))%>%mutate_at(c(2), function(x){x - lag(x)}) %>%mutate(month = as.Date(paste0("01", month), format = "%d%m%Y"))
trans2 <- trans %>% group_by(Timestamp)%>%summarise(trans = mean(n.transactions)) %>%subset(Timestamp > start& Timestamp < end) %>%mutate(month = format(Timestamp, "%m%Y"))%>%group_by(month)%>%summarise(trans = mean(trans)) %>% mutate_at(c(2), function(x){x - lag(x)})%>%mutate(month = as.Date(paste0("01", month), format = "%d%m%Y"))
addy2 <- addy %>% group_by(Timestamp)%>%summarise(addy = mean(n.unique.addresses)) %>%subset(Timestamp > start& Timestamp < end) %>%mutate(month = format(Timestamp, "%m%Y"))%>%group_by(month)%>%summarise(addy = mean(addy))%>% mutate_at(c(2), function(x){x - lag(x)})%>%mutate(month = as.Date(paste0("01", month), format = "%d%m%Y"))
delta_net <- users2%>%merge(trans2, all.x=TRUE, all.y=TRUE)%>%merge(addy2, all.x=TRUE, all.y=TRUE) %>%
arrange(month)
#delta_net <- net %>% mutate_at(c(2:4), function(x){x - lag(x)})
getSymbols("BTC-USD",from = min(users$Timestamp),to =  max(users$Timestamp))
BTC <- as.data.frame(`BTC-USD`)
BTC$Date <- as.Date(rownames(BTC))#seq(min(delta_net$Timestamp),max(delta_net$Timestamp),by="days")
#BTC$`BTC-USD.Close`[BTC$Date=="2020-04-17"] <- 7096.18
BTC <- BTC%>%mutate(month = format(Date, "%m%Y"))%>%group_by(month)%>%summarise(`BTC-USD.Close` = mean(`BTC-USD.Close`))%>%
arrange(month)
BTC_return_dat <- data.frame(Date = BTC$month[-1],
BTC = 100*((BTC[-1,c( "BTC-USD.Close") ])-
(BTC[-nrow(BTC),c("BTC-USD.Close") ]))/BTC[-nrow(BTC),c("BTC-USD.Close") ])%>%
mutate(month = as.Date(paste0("01", Date), format = "%d%m%Y"))
BTC_dat <- data.frame(Date = BTC$month[-1],
BTC = BTC[-1,c( "BTC-USD.Close") ])%>%
arrange(Date)
all <- merge(delta_net, BTC_return_dat, by.x = "month", by.y= "month", all=TRUE) #%>%subset(Timestamp > as.Date("2015-01-01"))
cor(delta_net[,-1])
lm_trans_month <- lm(BTC.USD.Close ~ trans , data = all)
summary(lm_trans_month )
lm_addy_month  <- lm(BTC.USD.Close ~ addy, data = all)
summary(lm_addy_month)
lm_users_month  <- lm(BTC.USD.Close ~ users , data = all)
summary(lm_users_month )
lm5_month_old  <- lm(BTC.USD.Close ~  trans + addy+users , data = all)
summary(lm5_month_old)
return(lm5_month_old)
}
monthly_old <- get_monthly_reg(folder = "Network_older")
monthly_new <- get_monthly_reg(folder = "Network")
monthly_old
monthly_new
